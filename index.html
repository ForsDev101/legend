<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŒŸ Neon Chat</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* === NEON TEMA === */
        :root {
            --neon-pink: #ff00ff;
            --neon-blue: #00ffff;
            --neon-purple: #9d00ff;
            --light-pink: #ffb6c1;
            --white: #ffffff;
            --dark-bg: #0a0a0a;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-light: #f0f0f0;
            --text-gray: #888888;
            --shadow-neon: 0 0 15px rgba(255, 0, 255, 0.5);
            --shadow-light: 0 5px 20px rgba(255, 0, 255, 0.2);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        /* === GÄ°RÄ°Åž EKRANI === */
        #loginScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .login-container {
            width: 100%;
            max-width: 400px;
        }

        .login-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 2px solid var(--neon-pink);
            border-radius: var(--border-radius);
            padding: 40px 30px;
            text-align: center;
            box-shadow: var(--shadow-neon);
            position: relative;
            overflow: hidden;
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 0, 255, 0.1) 50%,
                transparent 70%
            );
            animation: shimmer 3s infinite linear;
            z-index: -1;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .logo {
            margin-bottom: 30px;
        }

        .logo h1 {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
        }

        .logo p {
            color: var(--neon-blue);
            font-size: 14px;
            letter-spacing: 2px;
        }

        .login-form {
            text-align: left;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            color: var(--neon-blue);
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-control {
            width: 100%;
            padding: 18px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--neon-purple);
            border-radius: 12px;
            color: var(--text-light);
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--neon-pink);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.3);
        }

        .role-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .role-btn {
            flex: 1;
            padding: 18px;
            border: 2px solid var(--neon-purple);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .role-btn:hover {
            border-color: var(--neon-pink);
            transform: translateY(-2px);
        }

        .role-btn.active {
            border-color: var(--neon-pink);
            background: linear-gradient(135deg, rgba(255, 0, 255, 0.2), rgba(157, 0, 255, 0.2));
            box-shadow: var(--shadow-light);
        }

        .login-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border: none;
            border-radius: 12px;
            color: var(--white);
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 255, 0.4);
        }

        .login-btn:active {
            transform: translateY(0);
        }

        /* === ANA UYGULAMA === */
        .app-container {
            display: none;
            min-height: 100vh;
        }

        /* === HEADER === */
        .header {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 2px solid var(--neon-pink);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 700;
            font-size: 20px;
            box-shadow: var(--shadow-light);
        }

        .user-info h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 3px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info span {
            font-size: 12px;
            color: var(--neon-blue);
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .header-btn {
            width: 45px;
            height: 45px;
            border: 2px solid var(--neon-purple);
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            color: var(--neon-pink);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .header-btn:hover {
            border-color: var(--neon-pink);
            background: rgba(255, 0, 255, 0.1);
            transform: translateY(-2px);
        }

        /* === TAB BAR === */
        .tab-bar {
            display: flex;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--neon-pink);
            padding: 0 20px;
            position: sticky;
            top: 75px;
            z-index: 99;
        }

        .tab-btn {
            flex: 1;
            padding: 20px 0;
            border: none;
            background: none;
            color: var(--text-gray);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            color: var(--neon-pink);
        }

        .tab-btn.active {
            color: var(--neon-pink);
            border-bottom-color: var(--neon-pink);
        }

        .tab-btn i {
            font-size: 20px;
        }

        .tab-badge {
            position: absolute;
            top: 10px;
            right: 15px;
            background: var(--neon-pink);
            color: var(--white);
            font-size: 11px;
            min-width: 20px;
            height: 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* === SAYFA Ä°Ã‡ERÄ°KLERÄ° === */
        .page-container {
            height: calc(100vh - 145px);
            overflow-y: auto;
            padding-bottom: 20px;
        }

        .page {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === CHAT SAYFASI === */
        .chat-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .chat-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 0, 255, 0.3);
        }

        .chat-header h2 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: var(--neon-blue);
        }

        .chat-stats span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .messages-container {
            height: calc(100vh - 350px);
            overflow-y: auto;
            margin-bottom: 25px;
            padding-right: 10px;
        }

        .message {
            margin-bottom: 20px;
            max-width: 85%;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.sent {
            margin-left: auto;
        }

        .message-content {
            padding: 18px;
            border-radius: 20px;
            position: relative;
            word-wrap: break-word;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .message.sent .message-content {
            background: linear-gradient(135deg, rgba(255, 0, 255, 0.2), rgba(157, 0, 255, 0.2));
            border-color: var(--neon-pink);
            border-bottom-right-radius: 5px;
        }

        .message.received .message-content {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--neon-blue);
            border-bottom-left-radius: 5px;
        }

        .message.admin .message-content {
            background: linear-gradient(135deg, rgba(255, 0, 255, 0.3), rgba(0, 255, 255, 0.3));
            border-color: var(--neon-purple);
            border-left: 5px solid var(--neon-pink);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 12px;
            font-weight: 600;
        }

        .message.sent .message-header {
            color: var(--neon-pink);
        }

        .message.received .message-header {
            color: var(--neon-blue);
        }

        .message-text {
            font-size: 16px;
            line-height: 1.5;
            color: var(--text-light);
        }

        .message-input-container {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--neon-purple);
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            gap: 15px;
            align-items: flex-end;
            margin-top: 20px;
        }

        .message-input {
            flex: 1;
            padding: 18px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            color: var(--text-light);
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            resize: none;
            min-height: 60px;
            max-height: 150px;
            transition: all 0.3s ease;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--neon-pink);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.3);
        }

        .send-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border: none;
            border-radius: 15px;
            color: var(--white);
            font-size: 22px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            transform: translateY(-3px) rotate(10deg);
            box-shadow: 0 10px 25px rgba(255, 0, 255, 0.4);
        }

        /* === YÃ–NETÄ°M SAYFASI === */
        .admin-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--neon-pink);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .admin-panel h3 {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--neon-pink);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .broadcast-form {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .broadcast-input {
            flex: 1;
            padding: 18px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            color: var(--text-light);
            font-size: 16px;
            font-family: 'Inter', sans-serif;
        }

        .broadcast-input:focus {
            outline: none;
            border-color: var(--neon-pink);
        }

        .broadcast-btn {
            padding: 0 30px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border: none;
            border-radius: 15px;
            color: var(--white);
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .broadcast-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 255, 0.4);
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--neon-pink);
            transform: translateY(-5px);
        }

        .stat-card h4 {
            font-size: 32px;
            color: var(--neon-pink);
            margin-bottom: 8px;
        }

        .stat-card p {
            font-size: 13px;
            color: var(--neon-blue);
            font-weight: 600;
        }

        /* === KULLANICILAR SAYFASI === */
        .users-grid {
            display: grid;
            gap: 15px;
        }

        .user-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .user-card:hover {
            border-color: var(--neon-pink);
            transform: translateY(-5px);
            box-shadow: var(--shadow-light);
        }

        .user-card.online {
            border-left: 5px solid var(--neon-pink);
        }

        .user-avatar-small {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 700;
            font-size: 20px;
            box-shadow: var(--shadow-light);
        }

        .user-details {
            flex: 1;
        }

        .user-details h4 {
            font-size: 18px;
            margin-bottom: 5px;
            color: var(--text-light);
        }

        .user-details p {
            font-size: 14px;
            color: var(--neon-blue);
            font-weight: 600;
        }

        .user-status {
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(255, 0, 255, 0.2);
            color: var(--neon-pink);
            font-weight: 700;
        }

        /* === AYARLAR SAYFASI === */
        .settings-section {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--neon-purple);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .settings-section h3 {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--neon-pink);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--text-light);
        }

        .setting-info p {
            font-size: 14px;
            color: var(--text-gray);
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--neon-purple);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--neon-pink);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .github-settings {
            margin-top: 30px;
        }

        .github-settings .form-group {
            margin-bottom: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .action-btn {
            flex: 1;
            padding: 18px;
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            color: var(--neon-pink);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .action-btn:hover {
            border-color: var(--neon-pink);
            background: rgba(255, 0, 255, 0.1);
            transform: translateY(-3px);
        }

        .action-btn.primary {
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            color: var(--white);
        }

        .action-btn.primary:hover {
            box-shadow: 0 10px 25px rgba(255, 0, 255, 0.4);
        }

        /* === NOTIFICATION === */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid var(--neon-pink);
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow-neon);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 350px;
            backdrop-filter: blur(10px);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            color: var(--neon-pink);
            font-size: 24px;
        }

        .notification-content h4 {
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--neon-pink);
        }

        .notification-content p {
            font-size: 14px;
            color: var(--text-light);
        }

        /* === BOÅž DURUM === */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-gray);
        }

        .empty-state i {
            font-size: 60px;
            color: var(--neon-pink);
            margin-bottom: 20px;
            opacity: 0.5;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .empty-state h3 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .empty-state p {
            max-width: 300px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* === SCROLLBAR === */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neon-pink);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--neon-purple);
        }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
            .header {
                padding: 15px;
            }
            
            .tab-bar {
                padding: 0 15px;
            }
            
            .page {
                padding: 15px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .broadcast-form {
                flex-direction: column;
            }
            
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .notification {
                left: 15px;
                right: 15px;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .role-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- GÄ°RÄ°Åž EKRANI -->
    <div id="loginScreen">
        <div class="login-container">
            <div class="login-card">
                <div class="logo">
                    <h1>ðŸŒŸ NEON CHAT</h1>
                    <p>AKTÄ°F MESAJLAÅžMA PLATFORMU</p>
                </div>
                
                <div class="login-form">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> ADINIZ</label>
                        <input type="text" class="form-control" id="username" placeholder="AdÄ±nÄ±zÄ± girin">
                    </div>
                    
                    <div class="role-selector">
                        <button class="role-btn active" onclick="selectRole('user')">
                            <i class="fas fa-user"></i> KULLANICI
                        </button>
                        <button class="role-btn" onclick="selectRole('admin')">
                            <i class="fas fa-crown"></i> YÃ–NETÄ°CÄ°
                        </button>
                    </div>
                    
                    <div class="form-group" id="passwordGroup" style="display: none;">
                        <label><i class="fas fa-lock"></i> YÃ–NETÄ°CÄ° ÅžÄ°FRESÄ°</label>
                        <input type="password" class="form-control" id="password" placeholder="Åžifrenizi girin">
                    </div>
                    
                    <button class="login-btn" onclick="login()">
                        <i class="fas fa-sign-in-alt"></i> SÄ°STEME GÄ°RÄ°Åž
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ANA UYGULAMA -->
    <div class="app-container" id="appContainer">
        <!-- HEADER -->
        <div class="header">
            <div class="header-left">
                <div class="user-avatar" id="userAvatar">?</div>
                <div class="user-info">
                    <h3 id="userName">KullanÄ±cÄ±</h3>
                    <span id="userRole">KullanÄ±cÄ±</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-btn" onclick="refreshChat()" title="Yenile">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="header-btn" onclick="logout()" title="Ã‡Ä±kÄ±ÅŸ">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>

        <!-- TAB BAR -->
        <div class="tab-bar">
            <button class="tab-btn active" onclick="showTab('chat')">
                <i class="fas fa-comment"></i>
                <span>Sohbet</span>
            </button>
            <button class="tab-btn" onclick="showTab('users')" id="usersTab">
                <i class="fas fa-users"></i>
                <span>KullanÄ±cÄ±lar</span>
                <span class="tab-badge" id="usersBadge">0</span>
            </button>
            <button class="tab-btn" onclick="showTab('admin')" id="adminTab" style="display: none;">
                <i class="fas fa-crown"></i>
                <span>YÃ¶netim</span>
            </button>
            <button class="tab-btn" onclick="showTab('settings')">
                <i class="fas fa-cog"></i>
                <span>Ayarlar</span>
            </button>
        </div>

        <!-- SAYFA Ä°Ã‡ERÄ°KLERÄ° -->
        <div class="page-container">
            <!-- SOHBET SAYFASI -->
            <div class="page active" id="chatPage">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2><i class="fas fa-comments"></i> Genel Sohbet</h2>
                        <div class="chat-stats">
                            <span><i class="fas fa-users"></i> <span id="onlineCount">1</span> Ã§evrimiÃ§i</span>
                            <span><i class="fas fa-message"></i> <span id="messageCount">0</span> mesaj</span>
                            <span><i class="fas fa-bolt"></i> <span id="responseTime">0.1s</span></span>
                        </div>
                    </div>
                    
                    <div class="messages-container" id="messagesContainer">
                        <div class="empty-state" id="emptyChat">
                            <i class="fas fa-comment-slash"></i>
                            <h3>HenÃ¼z mesaj yok</h3>
                            <p>Ä°lk mesajÄ± gÃ¶ndererek sohbeti baÅŸlatÄ±n!</p>
                        </div>
                        <!-- Mesajlar buraya eklenecek -->
                    </div>
                    
                    <div class="message-input-container">
                        <textarea 
                            class="message-input" 
                            id="messageInput" 
                            placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." 
                            rows="1"
                            onkeydown="handleKeyPress(event)"
                            oninput="autoResize(this)"></textarea>
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- KULLANICILAR SAYFASI -->
            <div class="page" id="usersPage">
                <div class="users-grid" id="usersList">
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>HenÃ¼z kullanÄ±cÄ± yok</h3>
                        <p>DiÄŸer kullanÄ±cÄ±lar katÄ±ldÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necekler.</p>
                    </div>
                    <!-- KullanÄ±cÄ±lar buraya eklenecek -->
                </div>
            </div>

            <!-- YÃ–NETÄ°M SAYFASI -->
            <div class="page" id="adminPage">
                <div class="admin-panel">
                    <h3><i class="fas fa-bullhorn"></i> Duyuru GÃ¶nder</h3>
                    <div class="broadcast-form">
                        <input type="text" class="broadcast-input" id="broadcastInput" placeholder="TÃ¼m kullanÄ±cÄ±lara gÃ¶nderilecek mesaj...">
                        <button class="broadcast-btn" onclick="sendBroadcast()">
                            <i class="fas fa-broadcast-tower"></i> GÃ–NDER
                        </button>
                    </div>
                    
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h4 id="totalUsers">1</h4>
                            <p>TOPLAM KULLANICI</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="onlineUsers">1</h4>
                            <p>Ã‡EVRÄ°MÄ°Ã‡Ä°</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="totalMessagesStat">0</h4>
                            <p>TOPLAM MESAJ</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="todayMessages">0</h4>
                            <p>BUGÃœNKÃœ MESAJ</p>
                        </div>
                    </div>
                </div>
                
                <div class="admin-panel">
                    <h3><i class="fas fa-database"></i> Veri YÃ¶netimi</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="exportData()">
                            <i class="fas fa-download"></i> DÄ±ÅŸa Aktar
                        </button>
                        <button class="action-btn primary" onclick="clearChatData()">
                            <i class="fas fa-trash"></i> Temizle
                        </button>
                    </div>
                </div>
            </div>

            <!-- AYARLAR SAYFASI -->
            <div class="page" id="settingsPage">
                <div class="settings-section">
                    <h3><i class="fas fa-bell"></i> Bildirim AyarlarÄ±</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Yeni Mesaj Bildirimleri</h4>
                            <p>Yeni mesaj geldiÄŸinde bildirim gÃ¶ster</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="notifyMessages" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Ses Efektleri</h4>
                            <p>Mesaj gÃ¶nderildiÄŸinde ses Ã§al</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="soundEffects" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-code-branch"></i> GitHub AyarlarÄ±</h3>
                    <div class="github-settings">
                        <div class="form-group">
                            <label><i class="fab fa-github"></i> GitHub KullanÄ±cÄ± AdÄ±</label>
                            <input type="text" class="form-control" id="githubUsername" placeholder="kullanici_adiniz" value="ForsDev101">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-code"></i> Repository AdÄ±</label>
                            <input type="text" class="form-control" id="githubRepo" placeholder="repo_adi" value="NeonChat">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-key"></i> Access Token (Opsiyonel)</label>
                            <input type="password" class="form-control" id="githubToken" placeholder="Public repo iÃ§in gerekli deÄŸil">
                        </div>
                        <button class="action-btn primary" onclick="saveGitHubSettings()">
                            <i class="fas fa-save"></i> GitHub AyarlarÄ±nÄ± Kaydet
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-database"></i> Veri YÃ¶netimi</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="exportData()">
                            <i class="fas fa-download"></i> Verileri Yedekle
                        </button>
                        <button class="action-btn" onclick="clearLocalData()">
                            <i class="fas fa-trash"></i> Yerel Verileri Temizle
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BÄ°LDÄ°RÄ°M -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-bell"></i>
        </div>
        <div class="notification-content">
            <h4 id="notificationTitle">Bildirim</h4>
            <p id="notificationText">MesajÄ±nÄ±z gÃ¶nderildi</p>
        </div>
    </div>

    <script>
        // === SÄ°STEM AYARLARI ===
        const SYSTEM = {
            GITHUB_USERNAME: 'ForsDev101',
            GITHUB_REPO: 'NeonChat',
            GITHUB_TOKEN: '',
            ADMIN_PASSWORD: 'Hayati1959',
            AUTO_REFRESH: 3000, // 3 SANÄ°YEDE BÄ°R YENÄ°LEME
            MAX_MESSAGES: 500
        };

        // === DEÄžÄ°ÅžKENLER ===
        let currentUser = {
            username: '',
            role: 'user',
            isOnline: true,
            avatarColor: '#ff00ff'
        };

        let messages = [];
        let users = [];
        let settings = {
            notifyMessages: true,
            soundEffects: true,
            autoScroll: true
        };

        let lastMessageTime = 0;
        const MESSAGE_COOLDOWN = 1000; // 1 saniye mesaj bekleme sÃ¼resi

        // === GÄ°RÄ°Åž Ä°ÅžLEMLERÄ° ===
        function selectRole(role) {
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentUser.role = role;
            
            const passwordGroup = document.getElementById('passwordGroup');
            passwordGroup.style.display = role === 'admin' ? 'block' : 'none';
            
            if (role === 'admin') {
                document.getElementById('password').value = '';
            }
        }

        async function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username) {
                showNotification('LÃ¼tfen adÄ±nÄ±zÄ± girin!', 'error');
                return;
            }
            
            if (currentUser.role === 'admin') {
                if (password !== SYSTEM.ADMIN_PASSWORD) {
                    showNotification('YÃ¶netici ÅŸifresi yanlÄ±ÅŸ!', 'error');
                    return;
                }
            }
            
            currentUser.username = username;
            currentUser.isOnline = true;
            
            // GiriÅŸ animasyonu
            document.getElementById('loginScreen').style.opacity = '0';
            
            setTimeout(async () => {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                await initializeApp();
            }, 300);
        }

        async function initializeApp() {
            updateUserUI();
            loadSettings();
            await loadMessages();
            await loadUsers();
            await saveUserToGitHub();
            startPolling();
            
            // Admin panelini gÃ¶ster/gizle
            if (currentUser.role === 'admin') {
                document.getElementById('adminTab').style.display = 'flex';
            }
            
            showNotification(`HoÅŸ geldiniz, ${currentUser.username}!`, 'success');
            
            // Sistem mesajÄ± ekle
            await addSystemMessage(`${currentUser.username} sohbete katÄ±ldÄ±!`);
        }

        function updateUserUI() {
            document.getElementById('userName').textContent = currentUser.username;
            document.getElementById('userRole').textContent = currentUser.role === 'admin' ? 'YÃ¶netici' : 'KullanÄ±cÄ±';
            const initials = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('userAvatar').textContent = initials;
            document.getElementById('userAvatar').style.background = `linear-gradient(45deg, ${currentUser.avatarColor}, var(--neon-purple))`;
        }

        // === TAB Ä°ÅžLEMLERÄ° ===
        function showTab(tabId) {
            // TÃ¼m tab butonlarÄ±ndan active classÄ±nÄ± kaldÄ±r
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // TÃ¼m sayfalarÄ± gizle
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // SeÃ§ilen tab butonuna active classÄ±nÄ± ekle
            event.target.classList.add('active');
            
            // SeÃ§ilen sayfayÄ± gÃ¶ster
            document.getElementById(tabId + 'Page').classList.add('active');
        }

        // === MESAJ Ä°ÅžLEMLERÄ° (DÃœZGÃœN Ã‡ALIÅžAN) ===
        async function loadMessages() {
            try {
                const data = await fetchFromGitHub('messages.json');
                messages = data.messages || [];
                updateMessagesUI();
                updateStats();
            } catch (error) {
                console.error('Mesajlar yÃ¼klenemedi:', error);
                showNotification('Mesajlar yÃ¼klenemedi!', 'error');
                messages = [];
                updateMessagesUI();
            }
        }

        function updateMessagesUI() {
            const container = document.getElementById('messagesContainer');
            const emptyChat = document.getElementById('emptyChat');
            
            if (messages.length === 0) {
                container.innerHTML = '';
                container.appendChild(emptyChat);
                emptyChat.style.display = 'block';
                return;
            }
            
            emptyChat.style.display = 'none';
            
            let html = '';
            messages.slice(-50).forEach(msg => {
                const isMe = msg.sender === currentUser.username;
                const isAdmin = msg.senderRole === 'admin';
                const time = formatTime(msg.timestamp);
                
                html += `
                    <div class="message ${isMe ? 'sent' : 'received'} ${isAdmin ? 'admin' : ''}">
                        <div class="message-content">
                            <div class="message-header">
                                <span>${escapeHtml(msg.sender)}</span>
                                <span>${time}</span>
                            </div>
                            <div class="message-text">${escapeHtml(msg.text)}</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Otomatik kaydÄ±r
            if (settings.autoScroll) {
                container.scrollTop = container.scrollHeight;
            }
        }

        async function sendMessage() {
            const now = Date.now();
            if (now - lastMessageTime < MESSAGE_COOLDOWN) {
                showNotification('LÃ¼tfen biraz bekleyin!', 'warning');
                return;
            }
            
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) {
                showNotification('LÃ¼tfen mesajÄ±nÄ±zÄ± yazÄ±n!', 'warning');
                return;
            }
            
            // Yeni mesaj oluÅŸtur
            const newMessage = {
                id: 'msg_' + Date.now(),
                text: text,
                sender: currentUser.username,
                senderRole: currentUser.role,
                timestamp: Date.now()
            };
            
            lastMessageTime = now;
            
            try {
                // GitHub'a kaydet
                await saveMessageToGitHub(newMessage);
                
                // Listeye ekle
                messages.push(newMessage);
                
                // UI'yÄ± gÃ¼ncelle
                updateMessagesUI();
                
                // Input'u temizle
                input.value = '';
                autoResize(input);
                
                // Bildirim gÃ¶ster
                showNotification('Mesaj gÃ¶nderildi!', 'success');
                
            } catch (error) {
                console.error('Mesaj gÃ¶nderilemedi:', error);
                showNotification('Mesaj gÃ¶nderilemedi! GitHub baÄŸlantÄ±sÄ±nÄ± kontrol edin.', 'error');
            }
        }

        async function saveMessageToGitHub(message) {
            const data = await fetchFromGitHub('messages.json');
            data.messages = data.messages || [];
            data.messages.push(message);
            
            // En fazla 500 mesaj sakla
            if (data.messages.length > SYSTEM.MAX_MESSAGES) {
                data.messages = data.messages.slice(-SYSTEM.MAX_MESSAGES);
            }
            
            await saveToGitHub('messages.json', data);
        }

        async function addSystemMessage(text) {
            const systemMessage = {
                id: 'sys_' + Date.now(),
                text: text,
                sender: 'Sistem',
                senderRole: 'system',
                timestamp: Date.now()
            };
            
            messages.push(systemMessage);
            await saveMessageToGitHub(systemMessage);
            updateMessagesUI();
        }

        // === YÃ–NETÄ°CÄ° Ä°ÅžLEMLERÄ° ===
        async function sendBroadcast() {
            if (currentUser.role !== 'admin') {
                showNotification('Sadece yÃ¶neticiler duyuru gÃ¶nderebilir!', 'error');
                return;
            }
            
            const input = document.getElementById('broadcastInput');
            const message = input.value.trim();
            
            if (!message) {
                showNotification('LÃ¼tfen duyuru mesajÄ±nÄ± yazÄ±n!', 'warning');
                return;
            }
            
            const broadcastMessage = {
                id: 'brd_' + Date.now(),
                text: `ðŸ“¢ DUYURU: ${message}`,
                sender: currentUser.username,
                senderRole: 'admin',
                timestamp: Date.now()
            };
            
            try {
                await saveMessageToGitHub(broadcastMessage);
                messages.push(broadcastMessage);
                
                input.value = '';
                updateMessagesUI();
                showNotification('Duyuru gÃ¶nderildi!', 'success');
                
            } catch (error) {
                console.error('Duyuru gÃ¶nderilemedi:', error);
                showNotification('Duyuru gÃ¶nderilemedi!', 'error');
            }
        }

        // === KULLANICI Ä°ÅžLEMLERÄ° ===
        async function loadUsers() {
            try {
                const data = await fetchFromGitHub('users.json');
                users = data.users || [];
                updateUsersUI();
            } catch (error) {
                console.error('KullanÄ±cÄ±lar yÃ¼klenemedi:', error);
                users = [];
            }
        }

        async function saveUserToGitHub() {
            const data = await fetchFromGitHub('users.json');
            data.users = data.users || [];
            
            const userIndex = data.users.findIndex(u => u.username === currentUser.username);
            
            if (userIndex > -1) {
                data.users[userIndex] = currentUser;
            } else {
                data.users.push(currentUser);
            }
            
            // Sadece son 100 kullanÄ±cÄ±yÄ± sakla
            if (data.users.length > 100) {
                data.users = data.users.slice(-100);
            }
            
            await saveToGitHub('users.json', data);
        }

        function updateUsersUI() {
            const container = document.getElementById('usersList');
            const badge = document.getElementById('usersBadge');
            
            if (users.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>HenÃ¼z kullanÄ±cÄ± yok</h3>
                        <p>DiÄŸer kullanÄ±cÄ±lar katÄ±ldÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necekler.</p>
                    </div>
                `;
                badge.textContent = '0';
                return;
            }
            
            let html = '';
            const onlineUsers = users.filter(u => u.isOnline).length;
            
            users.forEach(user => {
                const isOnline = user.isOnline || false;
                const isMe = user.username === currentUser.username;
                
                html += `
                    <div class="user-card ${isOnline ? 'online' : ''}">
                        <div class="user-avatar-small" style="background: linear-gradient(45deg, ${user.avatarColor || '#ff00ff'}, var(--neon-purple))">
                            ${user.username.charAt(0).toUpperCase()}
                        </div>
                        <div class="user-details">
                            <h4>${escapeHtml(user.username)} ${isMe ? '(Siz)' : ''}</h4>
                            <p>${user.role === 'admin' ? 'ðŸ‘‘ YÃ¶netici' : 'ðŸ‘¤ KullanÄ±cÄ±'}</p>
                        </div>
                        <div class="user-status">
                            ${isOnline ? 'ðŸŸ¢ Ã‡evrimiÃ§i' : 'âš« Ã‡evrimdÄ±ÅŸÄ±'}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            badge.textContent = onlineUsers;
            updateUserStats();
        }

        function updateUserStats() {
            const onlineUsers = users.filter(u => u.isOnline).length;
            document.getElementById('onlineCount').textContent = onlineUsers;
            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('onlineUsers').textContent = onlineUsers;
        }

        function updateStats() {
            document.getElementById('messageCount').textContent = messages.length;
            document.getElementById('totalMessagesStat').textContent = messages.length;
            
            // BugÃ¼nkÃ¼ mesaj sayÄ±sÄ±nÄ± hesapla
            const today = new Date().toDateString();
            const todayMessages = messages.filter(msg => {
                return new Date(msg.timestamp).toDateString() === today;
            }).length;
            document.getElementById('todayMessages').textContent = todayMessages;
            
            // Response time (rastgele deÄŸer - demo iÃ§in)
            document.getElementById('responseTime').textContent = (Math.random() * 0.5 + 0.1).toFixed(1) + 's';
        }

        // === GÄ°THUB API (Ã‡ALIÅžAN VERSÄ°YON) ===
        async function fetchFromGitHub(filename) {
            const url = `https://api.github.com/repos/${SYSTEM.GITHUB_USERNAME}/${SYSTEM.GITHUB_REPO}/contents/${filename}`;
            
            const headers = {
                'Accept': 'application/vnd.github.v3+json'
            };
            
            if (SYSTEM.GITHUB_TOKEN) {
                headers['Authorization'] = `token ${SYSTEM.GITHUB_TOKEN}`;
            }
            
            try {
                const response = await fetch(url, { headers });
                
                if (!response.ok) {
                    if (response.status === 404) {
                        // Dosya yoksa boÅŸ obje dÃ¶ndÃ¼r
                        return filename === 'messages.json' ? { messages: [] } : { users: [] };
                    }
                    throw new Error(`GitHub API HatasÄ±: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.content) {
                    return filename === 'messages.json' ? { messages: [] } : { users: [] };
                }
                
                const content = atob(data.content.replace(/\n/g, ''));
                return JSON.parse(content);
                
            } catch (error) {
                console.error('GitHub fetch hatasÄ±:', error);
                throw error;
            }
        }

        async function saveToGitHub(filename, content) {
            const url = `https://api.github.com/repos/${SYSTEM.GITHUB_USERNAME}/${SYSTEM.GITHUB_REPO}/contents/${filename}`;
            
            let sha = null;
            try {
                const getResponse = await fetch(url, {
                    headers: SYSTEM.GITHUB_TOKEN ? { 
                        'Authorization': `token ${SYSTEM.GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json'
                    } : {
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (getResponse.ok) {
                    const data = await getResponse.json();
                    sha = data.sha;
                }
            } catch (error) {
                // Yeni dosya oluÅŸturulacak
            }
            
            const contentStr = JSON.stringify(content, null, 2);
            const contentBase64 = btoa(unescape(encodeURIComponent(contentStr)));
            
            const body = {
                message: `Update ${filename} via Neon Chat - ${new Date().toLocaleString()}`,
                content: contentBase64
            };
            
            if (sha) {
                body.sha = sha;
            }
            
            const headers = {
                'Content-Type': 'application/json',
                'Accept': 'application/vnd.github.v3+json'
            };
            
            if (SYSTEM.GITHUB_TOKEN) {
                headers['Authorization'] = `token ${SYSTEM.GITHUB_TOKEN}`;
            }
            
            const response = await fetch(url, {
                method: 'PUT',
                headers: headers,
                body: JSON.stringify(body)
            });
            
            if (!response.ok) {
                const errorText = await response.text();
                console.error('GitHub save hatasÄ±:', errorText);
                throw new Error(`GitHub save failed: ${response.status}`);
            }
            
            return await response.json();
        }

        function saveGitHubSettings() {
            SYSTEM.GITHUB_USERNAME = document.getElementById('githubUsername').value.trim();
            SYSTEM.GITHUB_REPO = document.getElementById('githubRepo').value.trim();
            SYSTEM.GITHUB_TOKEN = document.getElementById('githubToken').value.trim();
            
            // LocalStorage'a kaydet
            localStorage.setItem('neon_chat_github', JSON.stringify({
                username: SYSTEM.GITHUB_USERNAME,
                repo: SYSTEM.GITHUB_REPO,
                token: SYSTEM.GITHUB_TOKEN
            }));
            
            showNotification('GitHub ayarlarÄ± kaydedildi!', 'success');
            
            // Verileri yeniden yÃ¼kle
            loadMessages();
            loadUsers();
        }

        // === AYARLAR ===
        function loadSettings() {
            const savedSettings = localStorage.getItem('neon_chat_settings');
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                updateSettingsUI();
            }
            
            // GitHub ayarlarÄ±nÄ± yÃ¼kle
            const savedGitHub = localStorage.getItem('leon_github');
            if (savedGitHub) {
                const config = JSON.parse(savedGitHub);
                SYSTEM.GITHUB_USERNAME = config.username || 'ForsDev101';
                SYSTEM.GITHUB_REPO = config.repo || 'legend';
                SYSTEM.GITHUB_TOKEN = config.token || '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';
                
                document.getElementById('githubUsername').value = SYSTEM.GITHUB_USERNAME;
                document.getElementById('githubRepo').value = SYSTEM.GITHUB_REPO;
                document.getElementById('githubToken').value = SYSTEM.GITHUB_TOKEN;
            }
        }

        function saveSettings() {
            localStorage.setItem('neon_chat_settings', JSON.stringify(settings));
        }

        function updateSettingsUI() {
            document.getElementById('notifyMessages').checked = settings.notifyMessages;
            document.getElementById('soundEffects').checked = settings.soundEffects;
            
            // Event listener ekle
            document.querySelectorAll('.switch input').forEach(input => {
                input.addEventListener('change', function() {
                    settings[this.id] = this.checked;
                    saveSettings();
                });
            });
        }

        function exportData() {
            const chatData = {
                system: 'Neon Chat',
                exportedAt: new Date().toISOString(),
                user: currentUser.username,
                totalMessages: messages.length,
                messages: messages,
                users: users
            };
            
            const dataStr = JSON.stringify(chatData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const link = document.createElement('a');
            link.setAttribute('href', dataUri);
            link.setAttribute('download', `neon-chat-${Date.now()}.json`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Veriler dÄ±ÅŸa aktarÄ±ldÄ±!', 'success');
        }

        function clearChatData() {
            if (confirm('TÃ¼m mesaj geÃ§miÅŸini silmek istediÄŸinize emin misiniz?\nBu iÅŸlem geri alÄ±namaz!')) {
                messages = [];
                updateMessagesUI();
                showNotification('Sohbet temizlendi!', 'success');
            }
        }

        function clearLocalData() {
            if (confirm('Yerel verileri temizlemek istediÄŸinize emin misiniz?\nBu iÅŸlem ayarlarÄ±nÄ±zÄ± sÄ±fÄ±rlar.')) {
                localStorage.clear();
                location.reload();
            }
        }

        // === YARDIMCI FONKSÄ°YONLAR ===
        function showNotification(text, type = 'info') {
            const notification = document.getElementById('notification');
            const title = document.getElementById('notificationTitle');
            const textEl = document.getElementById('notificationText');
            
            let icon = 'fas fa-info-circle';
            
            switch(type) {
                case 'success':
                    icon = 'fas fa-check-circle';
                    title.textContent = 'BaÅŸarÄ±lÄ±';
                    break;
                case 'error':
                    icon = 'fas fa-exclamation-circle';
                    title.textContent = 'Hata';
                    break;
                case 'warning':
                    icon = 'fas fa-exclamation-triangle';
                    title.textContent = 'UyarÄ±';
                    break;
                default:
                    icon = 'fas fa-info-circle';
                    title.textContent = 'Bilgi';
            }
            
            document.querySelector('.notification-icon i').className = icon;
            textEl.textContent = text;
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function refreshChat() {
            loadMessages();
            loadUsers();
            showNotification('Yenilendi!', 'success');
        }

        function logout() {
            if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) {
                location.reload();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 150) + 'px';
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleTimeString('tr-TR', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function startPolling() {
            // Her 3 saniyede bir mesajlarÄ± yenile
            setInterval(async () => {
                await loadMessages();
                await loadUsers();
            }, SYSTEM.AUTO_REFRESH);
        }

        // === BAÅžLANGIÃ‡ ===
        document.addEventListener('DOMContentLoaded', function() {
            // VarsayÄ±lan ayarlar
            selectRole('user');
            loadSettings();
            
            // KullanÄ±cÄ± adÄ±na odaklan
            document.getElementById('username').focus();
        });
    </script>
</body>
</html>
